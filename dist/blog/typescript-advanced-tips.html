<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="UTF-8"><meta name="description" content="TypeScript 不仅仅是类型检查工具。掌握这些高级技巧，让你的代码更安全、更易维护。"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.16.19"><link rel="canonical" href="https://kurojim.github.io/blog/typescript-advanced-tips.html"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://kurojim.github.io/blog/typescript-advanced-tips.html"><meta property="og:title" content="TypeScript 高级技巧：提升代码质量 - KuroJim"><meta property="og:description" content="TypeScript 不仅仅是类型检查工具。掌握这些高级技巧，让你的代码更安全、更易维护。"><meta property="og:image" content="https://kurojim.github.io/images/og-image.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://kurojim.github.io/blog/typescript-advanced-tips.html"><meta property="twitter:title" content="TypeScript 高级技巧：提升代码质量 - KuroJim"><meta property="twitter:description" content="TypeScript 不仅仅是类型检查工具。掌握这些高级技巧，让你的代码更安全、更易维护。"><meta property="twitter:image" content="https://kurojim.github.io/images/og-image.jpg"><title>TypeScript 高级技巧：提升代码质量 - KuroJim</title><!-- Preload Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><style>*{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}body{font-family:-apple-system,BlinkMacSystemFont,SF Pro Display,Segoe UI,Roboto,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#d2d2d7;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#b0b0b5}::-moz-selection{background:#0071e3;color:#fff}::selection{background:#0071e3;color:#fff}
.gsc-replies{border-radius:16px!important}.gsc-comment{border-radius:12px!important}.gsc-header-button{border-radius:8px!important}.prose[data-astro-cid-4sn4zg3r]{--tw-prose-body: #424245;--tw-prose-headings: #1d1d1f;--tw-prose-links: #0071e3;--tw-prose-bold: #1d1d1f;--tw-prose-code: #0071e3;--tw-prose-pre-code: #e5e7eb;--tw-prose-pre-bg: #1d1d1f}.prose[data-astro-cid-4sn4zg3r] h1[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] h2[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] h3[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] h4[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] h5[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] h6[data-astro-cid-4sn4zg3r]{font-weight:600;letter-spacing:-.02em}.prose[data-astro-cid-4sn4zg3r] h2[data-astro-cid-4sn4zg3r]{margin-top:2.5rem;margin-bottom:1rem;font-size:1.875rem}.prose[data-astro-cid-4sn4zg3r] h3[data-astro-cid-4sn4zg3r]{margin-top:2rem;margin-bottom:.75rem;font-size:1.5rem}.prose[data-astro-cid-4sn4zg3r] p[data-astro-cid-4sn4zg3r]{margin-bottom:1.25rem;line-height:1.75}.prose[data-astro-cid-4sn4zg3r] a[data-astro-cid-4sn4zg3r]{text-decoration:underline;text-underline-offset:2px}.prose[data-astro-cid-4sn4zg3r] a[data-astro-cid-4sn4zg3r]:hover{color:#0077ed}.prose[data-astro-cid-4sn4zg3r] code[data-astro-cid-4sn4zg3r]{padding:.2em .4em;background-color:#f5f5f7;border-radius:.25em;font-size:.875em}.prose[data-astro-cid-4sn4zg3r] pre[data-astro-cid-4sn4zg3r]{margin:1.5rem 0;border-radius:.75rem;overflow-x:auto}.prose[data-astro-cid-4sn4zg3r] pre[data-astro-cid-4sn4zg3r] code[data-astro-cid-4sn4zg3r]{padding:1rem;background-color:transparent;font-size:.875em;line-height:1.5}.prose[data-astro-cid-4sn4zg3r] ul[data-astro-cid-4sn4zg3r],.prose[data-astro-cid-4sn4zg3r] ol[data-astro-cid-4sn4zg3r]{margin-bottom:1.25rem;padding-left:1.625rem}.prose[data-astro-cid-4sn4zg3r] li[data-astro-cid-4sn4zg3r]{margin-bottom:.5rem}.prose[data-astro-cid-4sn4zg3r] blockquote[data-astro-cid-4sn4zg3r]{margin:1.5rem 0;padding-left:1rem;border-left:3px solid #d2d2d7;color:#6e6e73;font-style:italic}.prose[data-astro-cid-4sn4zg3r] img[data-astro-cid-4sn4zg3r]{margin:2rem 0;border-radius:1rem}.line-clamp-2[data-astro-cid-4sn4zg3r]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
</style><script type="module">const e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu");e?.addEventListener("click",()=>{t?.classList.toggle("hidden")});
</script></head> <body class="bg-apple-gray-50 text-apple-gray-800 antialiased"> <div class="min-h-screen flex flex-col">  <header class="fixed top-0 left-0 right-0 z-50 backdrop-blur-md bg-white/70 border-b border-apple-gray-200/50"> <nav class="max-w-5xl mx-auto px-6 sm:px-8"> <div class="flex items-center justify-between h-14"> <!-- Logo --> <a href="/" class="text-xl font-semibold text-apple-gray-900 hover:text-apple-blue transition-colors">
KuroJim
</a> <!-- Desktop Navigation --> <ul class="hidden md:flex items-center gap-8"> <li> <a href="/" class="text-sm text-apple-gray-600 hover:text-apple-blue transition-colors"> 首页 </a> </li><li> <a href="/blog" class="text-sm text-apple-gray-600 hover:text-apple-blue transition-colors"> 博客 </a> </li> </ul> <!-- Mobile Menu Button --> <button id="mobile-menu-button" class="md:hidden p-2 -mr-2 text-apple-gray-600 hover:text-apple-blue transition-colors" aria-label="Toggle menu"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path> </svg> </button> </div> <!-- Mobile Navigation --> <div id="mobile-menu" class="md:hidden hidden pb-4"> <ul class="flex flex-col gap-2"> <li> <a href="/" class="block py-2 text-sm text-apple-gray-600 hover:text-apple-blue transition-colors"> 首页 </a> </li><li> <a href="/blog" class="block py-2 text-sm text-apple-gray-600 hover:text-apple-blue transition-colors"> 博客 </a> </li> </ul> </div> </nav> </header>  <main class="flex-1 pt-14" data-astro-cid-4sn4zg3r> <article class="max-w-3xl mx-auto px-6 sm:px-8 py-12 sm:py-16" data-astro-cid-4sn4zg3r> <!-- Article Header --> <header class="mb-12" data-astro-cid-4sn4zg3r> <!-- Tags --> <div class="flex flex-wrap gap-2 mb-6" data-astro-cid-4sn4zg3r> <span class="inline-flex items-center px-3 py-1 text-sm font-medium bg-apple-blue/10 text-apple-blue rounded-full" data-astro-cid-4sn4zg3r> TypeScript </span><span class="inline-flex items-center px-3 py-1 text-sm font-medium bg-apple-blue/10 text-apple-blue rounded-full" data-astro-cid-4sn4zg3r> JavaScript </span><span class="inline-flex items-center px-3 py-1 text-sm font-medium bg-apple-blue/10 text-apple-blue rounded-full" data-astro-cid-4sn4zg3r> 最佳实践 </span> </div> <!-- Title --> <h1 class="text-3xl sm:text-4xl md:text-5xl font-semibold text-apple-gray-900 mb-6 leading-tight tracking-tight" data-astro-cid-4sn4zg3r> TypeScript 高级技巧：提升代码质量 </h1> <!-- Meta Info --> <div class="flex flex-wrap items-center gap-4 text-sm text-apple-gray-500" data-astro-cid-4sn4zg3r> <div class="flex items-center gap-2" data-astro-cid-4sn4zg3r> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-4sn4zg3r> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-astro-cid-4sn4zg3r></path> </svg> <time datetime="2024-01-28T00:00:00.000Z" data-astro-cid-4sn4zg3r> 2024年1月28日 </time> </div>  </div> </header> <!-- Hero Image -->  <!-- Article Content --> <div class="prose prose-lg max-w-none" data-astro-cid-4sn4zg3r> <p>TypeScript 已经成为现代前端开发的标准。但很多人只是使用了它的基础功能。本文分享一些高级技巧，帮助你写出更好的 TypeScript 代码。</p>
<h2 id="1-类型守卫和类型谓词">1. 类型守卫和类型谓词</h2>
<h3 id="基础类型守卫">基础类型守卫</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> isString</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#F97583"> typeof</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'string'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> processValue</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isString</span><span style="color:#E1E4E8">(value)) {</span></span>
<span class="line"><span style="color:#6A737D">    // TypeScript 知道这里 value 是 string</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(value.</span><span style="color:#B392F0">toUpperCase</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="对象类型守卫">对象类型守卫</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  email</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Admin</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  permissions</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">[];</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Account</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> User</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> Admin</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> isAdmin</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">account</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Account</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> account</span><span style="color:#F97583"> is</span><span style="color:#B392F0"> Admin</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#9ECBFF"> 'permissions'</span><span style="color:#F97583"> in</span><span style="color:#E1E4E8"> account;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handleAccount</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">account</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Account</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isAdmin</span><span style="color:#E1E4E8">(account)) {</span></span>
<span class="line"><span style="color:#E1E4E8">    account.permissions.</span><span style="color:#B392F0">forEach</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">p</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(p));</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(account.email);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="2-泛型约束">2. 泛型约束</h2>
<h3 id="基础约束">基础约束</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Lengthwise</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  length</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> logLength</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Lengthwise</span><span style="color:#E1E4E8">>(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(arg.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">logLength</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"hello"</span><span style="color:#E1E4E8">);  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"><span style="color:#B392F0">logLength</span><span style="color:#E1E4E8">([</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">]);  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"><span style="color:#B392F0">logLength</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">123</span><span style="color:#E1E4E8">);  </span><span style="color:#6A737D">// ❌ Error: number 没有 length 属性</span></span>
<span class="line"></span></code></pre>
<h3 id="多重约束">多重约束</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> getName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>(</span><span style="color:#FFAB70">obj</span><span style="color:#F97583">:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> obj.name;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Person</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  age</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Animal</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  species</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">getName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Person</span><span style="color:#E1E4E8">>({ name: </span><span style="color:#9ECBFF">"Alice"</span><span style="color:#E1E4E8">, age: </span><span style="color:#79B8FF">30</span><span style="color:#E1E4E8"> });  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"><span style="color:#B392F0">getName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Animal</span><span style="color:#E1E4E8">>({ name: </span><span style="color:#9ECBFF">"Bob"</span><span style="color:#E1E4E8">, species: </span><span style="color:#9ECBFF">"Dog"</span><span style="color:#E1E4E8"> });  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"></span></code></pre>
<h2 id="3-条件类型">3. 条件类型</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> NonNullable</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> T</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> undefined</span><span style="color:#F97583"> ?</span><span style="color:#79B8FF"> never</span><span style="color:#F97583"> :</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Result</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> NonNullable</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">>;  </span><span style="color:#6A737D">// string</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 实际应用</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Flatten</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> T</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> U</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">?</span><span style="color:#B392F0"> U</span><span style="color:#F97583"> :</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Flat1</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Flatten</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">[][]>;  </span><span style="color:#6A737D">// string[]</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Flat2</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Flatten</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">>;  </span><span style="color:#6A737D">// string</span></span>
<span class="line"></span></code></pre>
<h3 id="内置条件类型">内置条件类型</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// 提取函数返回类型</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> AsyncReturnType</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">...</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">>> </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  T</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">...</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> R</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">?</span><span style="color:#B392F0"> R</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> fetchData</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> { id: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, name: </span><span style="color:#9ECBFF">"Test"</span><span style="color:#E1E4E8"> };</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Data</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> AsyncReturnType</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> fetchData>;</span></span>
<span class="line"><span style="color:#6A737D">// { id: number; name: string; }</span></span>
<span class="line"></span></code></pre>
<h2 id="4-模板字面量类型">4. 模板字面量类型</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> EventName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> `on${</span><span style="color:#B392F0">Capitalize</span><span style="color:#9ECBFF">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#9ECBFF">></span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> ClickEvent</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> EventName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#9ECBFF">'click'</span><span style="color:#E1E4E8">>;  </span><span style="color:#6A737D">// 'onClick'</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> MouseEvent</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> EventName</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#9ECBFF">'mouse'</span><span style="color:#E1E4E8">>;  </span><span style="color:#6A737D">// 'onMouse'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 实际应用：CSS 属性</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> CssProperty</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Margin</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> CssProperty</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#9ECBFF">`margin-${'top'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'bottom'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'left'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'right'}`</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// 'margin-top' | 'margin-bottom' | 'margin-left' | 'margin-right'</span></span>
<span class="line"></span></code></pre>
<h2 id="5-映射类型">5. 映射类型</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Readonly</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  readonly</span><span style="color:#E1E4E8"> [</span><span style="color:#B392F0">P</span><span style="color:#F97583"> in</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">P</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Partial</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  [</span><span style="color:#B392F0">P</span><span style="color:#F97583"> in</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">?:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">P</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 自定义映射类型</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Modifiable</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  -readonly</span><span style="color:#E1E4E8"> [</span><span style="color:#B392F0">P</span><span style="color:#F97583"> in</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">P</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Required</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  [</span><span style="color:#B392F0">P</span><span style="color:#F97583"> in</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">-?:</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">P</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<h3 id="高级映射类型">高级映射类型</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Getters</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  [</span><span style="color:#B392F0">P</span><span style="color:#F97583"> in</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#F97583"> as</span><span style="color:#9ECBFF"> `get${</span><span style="color:#B392F0">Capitalize</span><span style="color:#9ECBFF">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#F97583"> &#x26;</span><span style="color:#B392F0"> P</span><span style="color:#9ECBFF">></span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">P</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Person</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  age</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> PersonGetters</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Getters</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Person</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// {</span></span>
<span class="line"><span style="color:#6A737D">//   getName: () => string;</span></span>
<span class="line"><span style="color:#6A737D">//   getAge: () => number;</span></span>
<span class="line"><span style="color:#6A737D">// }</span></span>
<span class="line"></span></code></pre>
<h2 id="6-工具类型">6. 工具类型</h2>
<h3 id="partial-和-required">Partial 和 Required</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  email</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> updateUser</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">fields</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Partial</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">>) {</span></span>
<span class="line"><span style="color:#6A737D">  // fields 中所有属性都是可选的</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">updateUser</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, { name: </span><span style="color:#9ECBFF">"New Name"</span><span style="color:#E1E4E8"> });  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"></span></code></pre>
<h3 id="pick-和-omit">Pick 和 Omit</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> UserPreview</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Pick</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'id'</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> 'name'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// { id: number; name: string; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> CreateUser</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Omit</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">User</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// { name: string; email: string; }</span></span>
<span class="line"></span></code></pre>
<h3 id="record">Record</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> PageInfo</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  title</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Page</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "home"</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> "about"</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> "contact"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> nav</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Record</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Page</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">PageInfo</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  home: { title: </span><span style="color:#9ECBFF">"Home"</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">  about: { title: </span><span style="color:#9ECBFF">"About"</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">  contact: { title: </span><span style="color:#9ECBFF">"Contact"</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<h2 id="7-装饰器decorator">7. 装饰器（Decorator）</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> log</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>(</span></span>
<span class="line"><span style="color:#FFAB70">  target</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">  propertyKey</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">  descriptor</span><span style="color:#F97583">:</span><span style="color:#B392F0"> TypedPropertyDescriptor</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> originalMethod</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> descriptor.value;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  descriptor.</span><span style="color:#B392F0">value</span><span style="color:#F97583"> =</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">this</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">[]) {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`Calling ${</span><span style="color:#E1E4E8">propertyKey</span><span style="color:#9ECBFF">} with`</span><span style="color:#E1E4E8">, args);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> result</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> originalMethod.</span><span style="color:#B392F0">apply</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">, args);</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`${</span><span style="color:#E1E4E8">propertyKey</span><span style="color:#9ECBFF">} returned`</span><span style="color:#E1E4E8">, result);</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> result;</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> descriptor;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Calculator</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  @log</span></span>
<span class="line"><span style="color:#B392F0">  add</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">a</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">b</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> b;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> calc</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Calculator</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">calc.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">// 输出：</span></span>
<span class="line"><span style="color:#6A737D">// Calling add with [1, 2]</span></span>
<span class="line"><span style="color:#6A737D">// add returned 3</span></span>
<span class="line"></span></code></pre>
<h2 id="8-类型推断">8. 类型推断</h2>
<h3 id="returntype">ReturnType</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> createUser</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    id: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    name: </span><span style="color:#9ECBFF">"Alice"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    email: </span><span style="color:#9ECBFF">"alice@example.com"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> User</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> ReturnType</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> createUser>;</span></span>
<span class="line"><span style="color:#6A737D">// { id: number; name: string; email: string; }</span></span>
<span class="line"></span></code></pre>
<h3 id="parameters">Parameters</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> updateUser</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">email</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> UpdateUserParams</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Parameters</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> updateUser>;</span></span>
<span class="line"><span style="color:#6A737D">// [number, string, string]</span></span>
<span class="line"></span></code></pre>
<h2 id="9-品牌branded-types">9. 品牌（Branded Types）</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Brand</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> T</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">__brand</span><span style="color:#F97583">:</span><span style="color:#B392F0"> B</span><span style="color:#E1E4E8"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> UserId</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Brand</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">number</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'UserId'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> PostId</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Brand</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">number</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'PostId'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> getUserId</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UserId</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">as</span><span style="color:#B392F0"> UserId</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> getUser</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UserId</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> userId</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> getUserId</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">123</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">getUser</span><span style="color:#E1E4E8">(userId);  </span><span style="color:#6A737D">// ✅</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> postId</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 456</span><span style="color:#F97583"> as</span><span style="color:#B392F0"> PostId</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">getUser</span><span style="color:#E1E4E8">(postId);  </span><span style="color:#6A737D">// ❌ Error: Type 'PostId' is not assignable to type 'UserId'</span></span>
<span class="line"></span></code></pre>
<h2 id="10-类型守卫库">10. 类型守卫库</h2>
<p>创建可复用的类型守卫：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// types/guards.ts</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#79B8FF"> is</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  string</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> =></span><span style="color:#F97583"> typeof</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'string'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  number</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#79B8FF"> number</span><span style="color:#F97583"> =></span><span style="color:#F97583"> typeof</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'number'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  boolean</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#79B8FF"> boolean</span><span style="color:#F97583"> =></span><span style="color:#F97583"> typeof</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'boolean'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  array</span><span style="color:#E1E4E8">: &#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>(</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">guard</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">v</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#FFAB70"> v</span><span style="color:#F97583"> is</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">[] </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#E1E4E8">    Array.</span><span style="color:#B392F0">isArray</span><span style="color:#E1E4E8">(value) </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> value.</span><span style="color:#B392F0">every</span><span style="color:#E1E4E8">(guard),</span></span>
<span class="line"><span style="color:#B392F0">  object</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> value</span><span style="color:#F97583"> is</span><span style="color:#B392F0"> Record</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">unknown</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#F97583">    typeof</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'object'</span><span style="color:#F97583"> &#x26;&#x26;</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 使用</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> processValue</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (is.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(value)) {</span></span>
<span class="line"><span style="color:#E1E4E8">    value.</span><span style="color:#B392F0">toUpperCase</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (is.</span><span style="color:#B392F0">array</span><span style="color:#E1E4E8">(value, is.number)) {</span></span>
<span class="line"><span style="color:#E1E4E8">    value.</span><span style="color:#B392F0">reduce</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">a</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">b</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> b, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="最佳实践">最佳实践</h2>
<ol>
<li>
<p><strong>使用 strict 模式</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  "compilerOptions"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">    "strict"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p><strong>避免 any</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// ❌ 不好</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> processData</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ 好</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> processData</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> unknown</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isValidData</span><span style="color:#E1E4E8">(data)) {</span></span>
<span class="line"><span style="color:#6A737D">    // 使用 data</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p><strong>使用类型推断</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// ❌ 不必要的类型注解</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "Alice"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ 让 TypeScript 推断</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> name</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "Alice"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre>
</li>
<li>
<p><strong>优先使用 interface 而不是 type</strong></p>
<ul>
<li>interface 可以扩展</li>
<li>interface 可以合并</li>
<li>更好的错误提示</li>
</ul>
</li>
</ol>
<h2 id="总结">总结</h2>
<p>TypeScript 的高级特性可以帮助你：</p>
<ul>
<li>✅ 编写更安全的代码</li>
<li>✅ 提高代码可维护性</li>
<li>✅ 减少运行时错误</li>
<li>✅ 改善开发体验</li>
</ul>
<p>掌握这些技巧后，你会发现 TypeScript 不仅仅是类型检查工具，更是提升代码质量的强大武器。</p>
<p>推荐资源：</p>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/intro.html">TypeScript 手册</a></li>
<li><a href="https://basarat.gitbook.io/typescript/">TypeScript Deep Dive</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html">Utility Types</a></li>
</ul> </div> <!-- Article Footer --> <footer class="mt-16 pt-8 border-t border-apple-gray-200" data-astro-cid-4sn4zg3r> <!-- Navigation --> <nav class="flex justify-between gap-4 mb-12" data-astro-cid-4sn4zg3r> <a href="/blog/maintaining-open-source" class="flex-1 p-6 bg-apple-gray-50 rounded-2xl hover:bg-apple-gray-100 transition-colors" data-astro-cid-4sn4zg3r> <div class="text-sm text-apple-gray-500 mb-2" data-astro-cid-4sn4zg3r>上一篇</div> <div class="font-medium text-apple-gray-900 line-clamp-2" data-astro-cid-4sn4zg3r> 如何维护一个成功的开源项目 </div> </a> <a href="/blog/docker-practical-guide" class="flex-1 p-6 bg-apple-gray-50 rounded-2xl hover:bg-apple-gray-100 transition-colors text-right" data-astro-cid-4sn4zg3r> <div class="text-sm text-apple-gray-500 mb-2" data-astro-cid-4sn4zg3r>下一篇</div> <div class="font-medium text-apple-gray-900 line-clamp-2" data-astro-cid-4sn4zg3r> Docker 实战：从零搭建开发环境 </div> </a> </nav> <!-- Back to List --> <a href="/blog" class="inline-flex items-center gap-2 px-6 py-3 bg-apple-gray-50 text-apple-gray-700 rounded-full hover:bg-apple-gray-100 transition-all" data-astro-cid-4sn4zg3r> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-4sn4zg3r> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-astro-cid-4sn4zg3r></path> </svg> <span data-astro-cid-4sn4zg3r>返回博客列表</span> </a> </footer> <!-- Comments Section --> <section class="mt-16 pt-8 border-t border-apple-gray-200" data-astro-cid-4sn4zg3r> <h2 class="text-2xl font-semibold text-apple-gray-900 mb-8" data-astro-cid-4sn4zg3r>评论</h2> <script src="https://giscus.app/client.js" data-repo="KuroJim/KuroJim.github.io" data-repo-id="R_kgDONLxxxx" data-category="General" data-category-id="DIC_kwDONLxxxx" data-mapping="pathname" data-strict="0" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async>
</script>  </section> </article> </main> <footer class="mt-auto border-t border-apple-gray-200/50 bg-white"> <div class="max-w-5xl mx-auto px-6 sm:px-8 py-8"> <div class="flex flex-col sm:flex-row justify-between items-center gap-4"> <!-- Copyright --> <p class="text-sm text-apple-gray-500">
© 2026 KuroJim. 保留所有权利。
</p> <!-- Social Links --> <div class="flex items-center gap-6"> <a href="https://github.com/KuroJim" target="_blank" rel="noopener noreferrer" class="text-apple-gray-500 hover:text-apple-blue transition-colors" aria-label="GitHub"> <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"> <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path> </svg> </a> <a href="mailto:xiaoqj@stu.pku.edu.cn" class="text-apple-gray-500 hover:text-apple-blue transition-colors" aria-label="Email"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path> </svg> </a> <a href="https://twitter.com/KuroJim" target="_blank" rel="noopener noreferrer" class="text-apple-gray-500 hover:text-apple-blue transition-colors" aria-label="Twitter"> <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"> <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path> </svg> </a> </div> </div> <!-- Powered by --> <div class="mt-4 text-center sm:text-left"> <p class="text-xs text-apple-gray-400">
使用 <a href="https://astro.build" target="_blank" rel="noopener noreferrer" class="hover:text-apple-blue transition-colors">Astro</a> 构建
</p> </div> </div> </footer>  </div> </body></html> 